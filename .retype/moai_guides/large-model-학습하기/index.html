<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="3.5.0.761722180754">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 3.5.0">

    <!-- Primary Meta Tags -->
    <title>Large Model 학습하기</title>
    <meta name="title" content="Large Model 학습하기">
    <meta name="description" content="LM(Large Model) 이란?">

    <!-- Canonical -->
    <link rel="canonical" href="https://docs.moreh.io/moai_guides/large-model-학습하기/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://docs.moreh.io/moai_guides/large-model-학습하기/">
    <meta property="og:title" content="Large Model 학습하기">
    <meta property="og:description" content="LM(Large Model) 이란?">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://docs.moreh.io/moai_guides/large-model-학습하기/">
    <meta property="twitter:title" content="Large Model 학습하기">
    <meta property="twitter:description" content="LM(Large Model) 이란?">

    <script data-cfasync="false">(function () { var el = document.documentElement, m = localStorage.getItem("doc_theme"), wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="../../resources/css/retype.css?v=3.5.0.761722180754" rel="stylesheet">

    <script data-cfasync="false" src="../../resources/js/config.js?v=3.5.0.761722180754" data-turbo-eval="false" defer></script>
    <script data-cfasync="false" src="../../resources/js/retype.js?v=3.5.0" data-turbo-eval="false" defer></script>
    <script id="lunr-js" data-cfasync="false" src="../../resources/js/lunr.js?v=3.5.0.761722180754" data-turbo-eval="false" defer></script>
    <script id="prism-js" data-cfasync="false" src="../../resources/js/prism.js?v=3.5.0.761722180754" defer></script>
</head>
<body>
    <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
        <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>
    
        <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
            <div class="container relative flex items-center justify-between pr-6 grow md:justify-start">
                <!-- Mobile menu button skeleton -->
                <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
                <div v-cloak id="docs-sidebar-toggle"></div>
        
                <!-- Logo -->
                <div class="flex items-center justify-between h-full py-2 md:w-75">
                    <div class="flex items-center px-2 md:px-6">
                        <a id="docs-site-logo" href="../../" class="flex items-center leading-snug text-xl">
                            <span class="w-10 mr-2 grow-0 shrink-0 overflow-hidden">
                                <img class="max-h-10 dark:hidden md:inline-block" src="../../img/logo-white.png">
                                <img class="max-h-10 hidden dark:inline-block" src="../../img/logo-white.png">
                            </span>
                            <span class="dark:text-white font-semibold line-clamp-1 md:line-clamp-2">Moreh Documentation</span>
                        </a><span class="hidden px-2 py-1 ml-4 text-sm font-semibold leading-none text-root-logo-label-text bg-root-logo-label-bg rounded-sm md:inline-block">Docs</span>
                    </div>
        
                    <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
                </div>
        
                <div class="flex justify-between md:grow">
                    <!-- Top Nav -->
                    <nav class="hidden md:flex">
                        <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="about-moreh">https://docs.moreh.io</a>
                            </li>
        
                        </ul>
                    </nav>
        
                    <!-- Header Right Skeleton -->
                    <div v-cloak class="flex justify-end grow skeleton">
        
                        <!-- Search input mock -->
                        <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                            <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                            </div>
                            <input class="w-full h-10 placeholder-gray-400 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 dark:placeholder-dark-400" style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search">
                        </div>
        
                        <!-- Mobile search button -->
                        <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                        </div>
        
                        <!-- Dark mode switch placeholder -->
                        <div class="w-10 h-10 lg:ml-2"></div>
        
                        <!-- History button -->
                        <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                        </div>
                    </div>
        
                    <div v-cloak class="flex justify-end grow">
                        <div id="docs-mobile-search-button"></div>
                        <doc-search-desktop></doc-search-desktop>
        
                        <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                        <doc-history></doc-history>
                    </div>
                </div>
            </div>
        </header>
    
        <div class="container relative flex bg-white">
            <!-- Sidebar Skeleton -->
            <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">
            
                <!-- Render this div, if config.showSidebarFilter is `true` -->
                <div class="flex items-center h-16 px-6">
                    <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filter">
                </div>
            
                <div class="pl-6 mt-1 mb-4">
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                </div>
            
            </div>
            
            <!-- Sidebar component -->
            <doc-sidebar v-cloak>
                <template #sidebar-footer>
                    <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650">
            
                        <div class="py-3 px-6 md:hidden border-b dark:border-dark-650">
                            <nav>
                                <ul class="flex flex-wrap justify-center items-center">
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="about-moreh">https://docs.moreh.io</a>
                                    </li>
            
                                </ul>
                            </nav>
                        </div>
                    </div>
                </template>
            </doc-sidebar>
    
            <div class="grow min-w-0 dark:bg-dark-850">
                <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
                <div class="flex">
                    <div class="min-w-0 p-4 grow md:px-16">
                        <main class="relative pb-12 lg:pt-2">
                            <div class="docs-markdown" id="docs-content">
                                <!-- Rendered if sidebar right is enabled -->
                                <div id="docs-sidebar-right-toggle"></div>
                                <nav class="breadcrumb" aria-label="Breadcrumb">
                                    <ol role="list">
                                        <li class="pr-4">
                                            <a href="../../" class="pr-4">
                                                Moreh Documentation Hub
                                            </a>
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                                                <path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"/>
                                            </svg>
                                        </li>
                                        <li class="pr-4">
                                            <a href="../../moai_guides/" class="pr-4">
                                                Mo​AI 사용하기
                                            </a>
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                                                <path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"/>
                                            </svg>
                                        </li>
                                        <li class="pr-4">
                                            <a href="../../moai_guides/large-model-학습하기/" class="pr-4">
                                                Large Model 학습하기
                                            </a>
                                        </li>
                                    </ol>
                                </nav>
                
                                <!-- Page content  -->
<doc-anchor-target id="large-model-학습하기" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#large-model-학습하기">#</doc-anchor-trigger>
        <span>Large Model 학습하기</span>
    </h1>
</doc-anchor-target>
<p><strong>LM(Large Model) 이란?</strong></p>
<p><em>Moreh framework</em> 에서 학습, 추론이 가능한 대형 추론 모델을 의미합니다. 정기적으로 프레임워크와 함께 배포되며 Moreh 솔루션에서 딥러닝 학습에 필수적인 단계들을 수행할 수 있는 대형 언어 및 추론 모델을 다운로드할 수 있습니다. 따라서 사용자는 Large Model을 활용하여 직접 코딩하지 않아도 바로 학습, 추론을 수행할 수 있습니다.</p>
<p>Moreh 솔루션에서 지원하는 AI 프레임워크인 PyTorch와 TensorFlow, 그리고 학습 실행 방법을 설명 드리겠습니다.</p>
<doc-anchor-target id="pytorch">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#pytorch">#</doc-anchor-trigger>
        <span>PyTorch</span>
    </h2>
</doc-anchor-target>
<doc-anchor-target id="1-large-language-model-코드-다운로드">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#1-large-language-model-코드-다운로드">#</doc-anchor-trigger>
        <span>1. Large Language Model 코드 다운로드</span>
    </h3>
</doc-anchor-target>
<p>아래 간단한 명령어 한 줄로 다양한 Large Model 코드를 얻게 됩니다.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash"># Resnet 모델 다운로드 예시
ubuntu@vm:~$ get-reference-model resnet</code></pre>
</doc-codeblock></div>
<p>위와 같은 명령어 실행 시 ResNet에 대한 RM Code 설치 파일을 다운로드하고 실행하여 학습에 필요한 파일을 설치합니다. 명령어 실행 완료 시 모델명에 따른 폴더가 생성이 되며 해당 폴더로 들어가 아래 명령어로 바로 모델을 실행(학습)시킬 수 있습니다.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash"># 학습 모델 폴더로 이동
ubuntu@vm:~$ cd resnet

# 학습 모델 실행
ubuntu@vm:~$ python train.py</code></pre>
</doc-codeblock></div>
<blockquote>
<p>get-reference-model 명령어는 sudo 없이 사용하시길 권장드립니다. sudo 명령어가 포함될 경우, 실행 시 아래와 같은 에러가 발생할 수 있습니다.</p>
</blockquote>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">
    (...)

/data/work/install_arcface.sh: line 105: pip: command not found
- Installation Failed!

    (...)
</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="2-large-language-model-옵션-값-확인하기">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2-large-language-model-옵션-값-확인하기">#</doc-anchor-trigger>
        <span>2. Large Language Model 옵션 값 확인하기</span>
    </h3>
</doc-anchor-target>
<p>현재 <code v-pre>get-reference-model</code> 에서 지원하는 옵션 값들을 보고 싶으시다면, 아무런 옵션 값을 주지 않고 실행하거나, <code v-pre>-h</code> 옵션을 주면 보실 수 있습니다.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">ubuntu@vm:~$ get-reference-model -h
Usage: get-reference-model [-h|--help] [--download-only] [--download-dir] [-s|--show] (MODEL_NAME)
Example: get-reference-model resnet

Avaiable options:
-h, --help           Print help and exit
-s, --show           Print the available list of models
--download-only      Download the model shell script file without running
--download-dir       Set the installation path of a model default path: /home/ubuntu
--tensorflow         Set all option towards tensorflow reference model
                     ex) get-reference-model --tensorflow --show
                     ex) get-reference-model --tensorflow bert</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="3-제공되는-모든-large-model-목록-확인하기">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#3-제공되는-모든-large-model-목록-확인하기">#</doc-anchor-trigger>
        <span>3. 제공되는 모든 Large Model 목록 확인하기</span>
    </h3>
</doc-anchor-target>
<p>현재 어떤 모델 코드들이 제공되는지 궁금하시다면 <code v-pre>—-show(또는 -s)</code> 옵션을 이용하여 확인할 수 있습니다. 가장 범용적으로 쓰이는 딥러닝 모델과 Moreh 솔루션을 이용한 딥러닝 학습 모범 사례로 쓰일만한 안전한 모델들이 목록에 나타납니다.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">ubuntu@vm:~$ get-reference-model --show
[INFO] Downloadable Model List =&gt; 3dunet alexnet arcface bart bert dcgan deeplabv3m deeplabv3r densenet dlrm fasterrcnn fcn_resnet gnmt googlenet gpt gpt2 inceptionv3 lraspp maskrcnn mnasnet mobilenetv2 mobilenetv3 ncf resnet resnet2p1d resnet3d resnetMC resnext retinanet rnnt roberta shufflenetv2 speech2text squeezenet ssd ssdlite stdc t5 tacotron2 transformer transformerXL unet vgg wideresnet yolor yolov5
# 2023-09-11 기준 목록</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="4-large-model-설치-파일-설정하기">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#4-large-model-설치-파일-설정하기">#</doc-anchor-trigger>
        <span>4. Large Model 설치 파일 설정하기</span>
    </h3>
</doc-anchor-target>
<p>모델 설치 파일 <code v-pre>(.sh)</code> 에 대해서 수정 사항이 필요할 경우엔 아래와 같이 <code v-pre>--download-only</code> 옵션을 추가하여 모델 설치 파일만 다운로드 하실수도 있습니다. 해당 옵션을 추가하고 실행하면 실행 경로에 <code v-pre>install_MODEL_NAME.sh</code> 파일이 생성됩니다.</p>
<p>다음은 <code v-pre>install_resnet.sh</code> 파일을 다운받는 명령어 예시입니다.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">ubuntu@vm:~$ get-reference-model --download-only resnet</code></pre>
</doc-codeblock></div>
<p>모델 설치 경로를 수정하고 싶으시다면 <code v-pre>—-download-dir</code> 옵션 값으로 모델 설치 경로를 수정하실 수 있습니다. 해당 옵션 값이 존재하지 않을 경우에는 기본 경로인 <code v-pre>/home/ubuntu</code> 에 설치가 됩니다.</p>
<blockquote>
<p>VM에서 /home의 기본 용량이 100GB이기 때문에 추가 디스크가 제공되는 경우가 있습니다. 위 설정을 통해 추가 디스크가 마운트된 디렉토리를 설정할 수 있습니다.</p>
</blockquote>
<p>다음은 HOME경로에 있는 <code v-pre>test</code> 폴더에 ResNet 모델을 설치하는 예시입니다.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">ubuntu@vm:~$ get-reference-model resnet --download-dir ./test</code></pre>
</doc-codeblock></div>
<p><code v-pre>—-download-only</code> 옵션과 <code v-pre>—-download-dir</code> 옵션은 같이 사용하실 수 있습니다.</p>
<p>다음은 HOME경로에 있는 <code v-pre>test</code> 폴더에 <code v-pre>instsall_resnet.sh</code> 파일만 다운로드하는 명령어 예시입니다.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">bashㄴㅋㅋ</div>
<pre class="language-none"><code v-pre class="language-none">ubuntu@vm:~$ get-reference-model resnet --download-only --download-dir ./test</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="5-모델-학습-시작하기">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#5-모델-학습-시작하기">#</doc-anchor-trigger>
        <span>5. 모델 학습 시작하기</span>
    </h3>
</doc-anchor-target>
<p>홈 디렉터리 아래의 해당 모델 디렉터리로 이동한 다음 train.py 스크립트를 실행하여 모델 학습을 시작할 수 있습니다.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">(pytorch) ubuntu@vm:~$ cd ~/resnet
(pytorch) ubuntu@vm:~/resnet$ python train.py --train_batch_size 32

    (...)

[info] Requesting resources for KT AI Accelerator from the server...
[info] Initializing the worker daemon for KT AI Accelerator...
[info] [1/1] Connecting to resources on the server (192.168.00.00:00000)...
[info] Establishing links to the resources...
[info] KT AI Accelerator is ready to use.

    (...)

2023-09-12 16:59:04.998 | INFO     | __main__:train:355 - Epoch 1/42 start
2023-09-12 16:59:09.148 | INFO     | __main__:train:386 - TRAIN_STEP | Epoch:   1 | Iteration:    10/ 2012 | Loss:    4.702 | Throughput:  154.213 images/s | Duration: 4.150 s | Estimated Time Remaining: 830.850 s

    (...)
</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="hyperparameter-변경하기">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#hyperparameter-변경하기">#</doc-anchor-trigger>
        <span>Hyperparameter 변경하기</span>
    </h3>
</doc-anchor-target>
<p>b 옵션은 mini-batch size, 즉 학습 이미지 몇 장을 한 번에 AI 가속기에서 학습시킬 것인지를 지정합니다. AI 가속기 사양이 높아질수록 거기에 맞춰 mini-batch size를 키워 주어야 최적의 성능을 얻을 수 있습니다. Hyperscale AI Computing의 AI 가속기 모델별로 권장하는 실행 옵션은 해당 <a href="https://cloud.kt.com/solution/hyperscaleAiComputing/?tab=1" class="outbound" target="_blank"><span>모델 매뉴얼</span><svg xmlns="http://www.w3.org/2000/svg" class="docs-icon ml-1" viewBox="0 0 24 24" role="presentation"><g fill="currentColor"><path d="M15.5 2.25a.75.75 0 0 1 .75-.75h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V4.06l-6.22 6.22a.75.75 0 1 1-1.06-1.06L19.94 3h-3.69a.75.75 0 0 1-.75-.75Z"/><path d="M2.5 4.25c0-.966.784-1.75 1.75-1.75h8.5a.75.75 0 0 1 0 1.5h-8.5a.25.25 0 0 0-.25.25v15.5c0 .138.112.25.25.25h15.5a.25.25 0 0 0 .25-.25v-8.5a.75.75 0 0 1 1.5 0v8.5a1.75 1.75 0 0 1-1.75 1.75H4.25a1.75 1.75 0 0 1-1.75-1.75V4.25Z"/></g></svg></a>을 참고하십시오.</p>
<doc-anchor-target id="tensorflow">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#tensorflow">#</doc-anchor-trigger>
        <span>Tensorflow</span>
    </h2>
</doc-anchor-target>
<doc-anchor-target id="1-tensorflow-가상-환경">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#1-tensorflow-가상-환경">#</doc-anchor-trigger>
        <span>1. TensorFlow 가상 환경</span>
    </h3>
</doc-anchor-target>
<p>처음 VM 생성 시 기본으로 <code v-pre>tensorflow</code> 이름의 Tensorflow용 conda 가상환경이 존재합니다. Tensorflow conda 환경이 없는 사용자 분들은 아래와 같은 방법으로 TensorFlow를 위한 가상환경을 생성하시기 바랍니다.</p>
<doc-anchor-target id="2-tensorflow-large-model-코드-다운로드">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#2-tensorflow-large-model-코드-다운로드">#</doc-anchor-trigger>
        <span>2. Tensorflow Large Model 코드 다운로드</span>
    </h3>
</doc-anchor-target>
<p><code v-pre>get-reference-model</code> 명령어 한 줄로 다양한 Large Model(이하 LM) Code를 얻게 됩니다.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash"># Resnet 모델 다운로드 예시
ubuntu@vm:~$ get-reference-model --tensorflow resnet</code></pre>
</doc-codeblock></div>
<p>위와 같은 명령어 실행 시 ResNet에 대한 Large Model Code 설치 파일 및 샘플 데이터을 다운로드하게 되며, 동시에 해당 설치 파일을 실행시켜 실행환경을 세팅해줍니다. 명령어 실행 완료 시 모델명에 따른 폴더가 생성이 되며 해당 폴더로 들어가 아래 명령어로 바로 모델을 실행(학습)시킬 수 있습니다.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash"># 학습 모델 폴더로 이동
ubuntu@vm:~$ cd resnet

# 학습 모델 실행
ubuntu@vm:~$ python train.py</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="3-large-model-옵션-값-확인하기">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#3-large-model-옵션-값-확인하기">#</doc-anchor-trigger>
        <span>3. Large Model 옵션 값 확인하기</span>
    </h3>
</doc-anchor-target>
<p>현재 <code v-pre>get-reference-model</code>에서 지원하는 옵션 값들을 보고 싶으시다면, 아무런 옵션 값을 주지 않고 실행하거나, <code v-pre>-h</code>옵션을 주면 보실 수 있습니다.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">ubuntu@vm:~$ get-reference-model -h

Usage: get-reference-model [-h|--help] [--download-only] [--download-dir] [-s|--show] (MODEL_NAME)
Example: get-reference-model resnet

Avaiable options:
-h, --help           Print help and exit
-s, --show           Print the available list of models
--download-only      Download the model shell script file without running
--download-dir       Set the installation path of a model default path: /home/ubuntu
--tensorflow         Set all option towards tensorflow reference model
                    ex) get-reference-model --tensorflow --show
                    ex) get-reference-model --tensorflow bert</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="4-large-model-설치-파일-설정하기-1">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#4-large-model-설치-파일-설정하기-1">#</doc-anchor-trigger>
        <span>4. Large Model 설치 파일 설정하기</span>
    </h3>
</doc-anchor-target>
<p>모델 설치 경로를 수정하고 싶으시다면 <code v-pre>—-download-dir</code> 옵션 값으로 모델 설치 경로를 수정하실 수 있습니다. 해당 옵션 값이 존재하지 않을 경우에는 기본 경로인 <code v-pre>/home/ubuntu</code>에 설치가 됩니다.</p>
<blockquote>
<p>VM에서 /home의 기본 용량이 100GB이기 때문에 추가 디스크가 제공되는 경우가 있습니다. 위 설정을 통해 추가 디스크가 마운트된 디렉토리를 설정할 수 있습니다.</p>
</blockquote>
<p>다음은 <code v-pre>/data/tf-rm</code> 경로에 ResNet 모델 파일을 다운받는 명령어 예시입니다.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">ubuntu@vm:~$ get-reference-model --tensorflow resnet --download-dir /data/tf-rm</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="5-모델-학습-시작하기-1">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#5-모델-학습-시작하기-1">#</doc-anchor-trigger>
        <span>5. 모델 학습 시작하기</span>
    </h3>
</doc-anchor-target>
<p>홈 디렉터리 아래의 해당 모델 디렉터리로 이동한 다음 train.py 스크립트를 실행하여 모델 학습을 시작할 수 있습니다.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">(tensorflow) ubuntu@vm:~$ cd ~/resnet
(tensorflow) ubuntu@vm:~/resnet$ python train.py --train_batch_size 32

    (...)

[info] Requesting resources for KT AI Accelerator from the server...
[info] Initializing the worker daemon for KT AI Accelerator...
[info] [1/1] Connecting to resources on the server (192.168.00.00:00000)...
[info] Establishing links to the resources...
[info] KT AI Accelerator is ready to use.

    (...)

| INFO | moreh_controller.py:_train_n_steps:474 TRAIN_STEP | Iteration : 100/69300 | Loss : 5.113 | Throughput : 462.375 samples/s | Duration : 83.049 s | Estimated Time Remaining : 22063.482 s

    (...)
</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="hyperparameter-변경하기-1">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#hyperparameter-변경하기-1">#</doc-anchor-trigger>
        <span>Hyperparameter 변경하기</span>
    </h3>
</doc-anchor-target>
<p>b 옵션은 mini-batch size, 즉 학습 이미지 몇 장을 한 번에 AI 가속기에서 학습시킬 것인지를 지정합니다. AI 가속기 사양이 높아질수록 거기에 맞춰 mini-batch size를 키워 주어야 최적의 성능을 얻을 수 있습니다. Hyperscale AI Computing의 AI 가속기 모델별로 권장하는 실행 옵션은 해당 <a href="https://cloud.kt.com/solution/hyperscaleAiComputing/?tab=1" class="outbound" target="_blank"><span>모델 매뉴얼</span><svg xmlns="http://www.w3.org/2000/svg" class="docs-icon ml-1" viewBox="0 0 24 24" role="presentation"><g fill="currentColor"><path d="M15.5 2.25a.75.75 0 0 1 .75-.75h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V4.06l-6.22 6.22a.75.75 0 1 1-1.06-1.06L19.94 3h-3.69a.75.75 0 0 1-.75-.75Z"/><path d="M2.5 4.25c0-.966.784-1.75 1.75-1.75h8.5a.75.75 0 0 1 0 1.5h-8.5a.25.25 0 0 0-.25.25v15.5c0 .138.112.25.25.25h15.5a.25.25 0 0 0 .25-.25v-8.5a.75.75 0 0 1 1.5 0v8.5a1.75 1.75 0 0 1-1.75 1.75H4.25a1.75 1.75 0 0 1-1.75-1.75V4.25Z"/></g></svg></a>을 참고하십시오.</p>

                                <div class="flex items-center mt-6 mb-6 clear-both">
                                    <span>
                                        <a href="../../tags/">
                                            <svg class="inline-block -mb-px mr-1.5 text-blue-500 dark:text-blue-400" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" overflow="visible" fill="currentColor"><g><path d="M21.3 9.88l-8.59-8.59C12.52 1.11 12.27 1 12 1H2c-.55 0-1 .45-1 1v10c0 .27.11.52.29.71l8.59 8.58c.57.57 1.32.88 2.12.88s1.55-.31 2.12-.88l7.17-7.17a3.009 3.009 0 00.01-4.24zm-1.42 2.82l-7.17 7.17c-.39.39-1.02.39-1.42 0L3 11.59V3h8.59l8.29 8.29c.39.39.39 1.03 0 1.41z" /><path d="M7.01 6C6.45 6 6 6.45 6 7s.45 1 1 1 1-.45 1-1-.44-1-.99-1z" /></g></svg>
                                        </a>
                                        <span class="mr-2"><a href="../../tags/guide/" class="no-link inline-flex align-middle items-center justify-center font-medium leading-none whitespace-nowrap text-blue-500 dark:text-blue-400 border border-blue-500 dark:border-blue-400 hover:bg-blue-100 dark:hover:bg-transparent dark:hover:border-blue-200 dark:hover:text-blue-200 transition-colors duration-200 ease-out h-6 px-2 text-xs rounded-md">
                                    <span>guide</span>
                                </a></span>
                                    </span>
                                </div>
                
                                <!-- Required only on API pages -->
                                <doc-toolbar-member-filter-no-results></doc-toolbar-member-filter-no-results>
                            </div>
                            <footer class="clear-both">
                                <div class="flex flex-wrap items-center justify-between mt-14">
                                    <a class="my-2.5 inline-flex items-center text-sm whitespace-nowrap text-blue-500 dark:text-blue-400 hover:text-blue-700 hover:underline" href="https://github.com/moreh-dev/moreh-2024docs/blob/main/MoAI_guides/Large Model 학습하기.md" target="_blank" rel="noopener">
                                        <svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M20 12c-.55 0-1 .45-1 1v7c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h7c.55 0 1-.45 1-1s-.45-1-1-1H4C2.35 3 1 4.35 1 6v14c0 1.65 1.35 3 3 3h14c1.65 0 3-1.35 3-3v-7c0-.55-.45-1-1-1z" /><path d="M22.21 1.79c-1.18-1.18-3.24-1.18-4.41 0l-9.5 9.5c-.13.13-.22.29-.26.46l-1 4c-.08.34.01.7.26.95.18.2.44.3.7.3.08 0 .16-.01.24-.03l4-1c.18-.04.34-.13.46-.26l9.5-9.5c1.22-1.22 1.22-3.2.01-4.42zm-1.42 3l-9.3 9.3-2.11.53.53-2.11 9.3-9.3c.42-.42 1.16-.42 1.59 0 .43.43.43 1.15-.01 1.58z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        <span>Edit this page</span>
                                    </a>
                                </div>
                            
                                <nav class="flex mt-14">
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l-lg transition-colors duration-150 relative hover:z-5" href="../../moai_guides/k8s-cluster에서-moreh-솔루션-사용하기/">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                            <span>
                                                <span class="block text-xs font-normal text-gray-400 dark:text-dark-400">Previous</span>
                                                <span class="block mt-1">K​8​S Cluster에서 Moreh 솔루션 사용하기</span>
                                            </span>
                                        </a>
                                    </div>
                            
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-r-lg transition-colors duration-150 relative hover:z-5" href="../../moai_guides/troubleshooting/">
                                            <span>
                                                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Next</span>
                                                <span class="block mt-1">Troubleshooting</span>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        </a>
                                    </div>
                                </nav>
                            </footer>
                        </main>
                
                        <div class="border-t dark:border-dark-650 pt-6 mb-8">
                            <footer class="flex flex-wrap items-center justify-between">
                                <div>
                                    <ul class="flex flex-wrap items-center text-sm">
                                    </ul>
                                </div>
                                <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"><p>© Copyright 2024. All rights reserved.</p></div>
                            </footer>
                        </div>
                    </div>
                
                    <!-- Rendered if sidebar right is enabled -->
                    <!-- Sidebar right skeleton-->
                    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:transform-none sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
                        <div class="pl-5">
                            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                        </div>
                    </div>
                
                    <!-- User should be able to hide sidebar right -->
                    <doc-sidebar-right v-cloak></doc-sidebar-right>
                </div>

            </div>
        </div>
    
        <doc-search-mobile></doc-search-mobile>
        <doc-back-to-top></doc-back-to-top>
    </div>


    <div id="docs-overlay-target"></div>

    <script data-cfasync="false">window.__DOCS__ = { "title": "Large Model 학습하기", level: 2, icon: "file", hasPrism: true, hasMermaid: false, hasMath: false, tocDepth: 23 }</script>
</body>
</html>
